# TODO: Renaming
TYPE_EXP: "tract_segmentation" # tract_segmentation|endings_segmentation|dm_regression|peak_regression

# Input data
# TODO: net summary -> weights number
DATASET: "HCP105"
PATH_DATA: "/data/HCP"
DIR_FEATURES: "mtdeconv"
FILENAME_FEATURES: "fodf_cropped.nii.gz"
DIR_LABELS: "bundle_masks"
CLASSSET: "bundles_all72"
FILENAME_LABELS: "bundle_masks_cropped.nii.gz"

# TODO: Can be inferred from headers (and experiment type)?
NR_OF_GRADIENTS: 15
RESOLUTION: "1.25mm" # 1.25mm|2.5mm
TYPE_LABELS: "int"
THRESHOLD: 0.5 # Binary: 0.5, Regression: 0.01

# Hyperparams
MODEL: "UNet_Pytorch_DeepSup"
SHAPE_INPUT: [144, 144]
BATCH_SIZE: 40
LEARNING_RATE: 0.001
LR_SCHEDULE: True
LR_SCHEDULE_MODE: "min" # min|max
LR_SCHEDULE_PATIENCE: 20
UNET_NR_FILT: 64
EPOCH_MULTIPLIER: 1 # 2D: 1, 3D: 12 for lowRes, 3 for highRes
NUM_EPOCHS: 250
SLICE_DIRECTION: "y" # x|y|z  ("combined" needs z)
TRAINING_SLICE_DIRECTION: "xyz" # y|xyz
LOSS_FUNCTION: "default" # default|soft_batch_dice
OPTIMIZER: "Adamax"
LOSS_WEIGHT: null # null: no weighting
LOSS_WEIGHT_LEN: -1 # -1: constant over all epochs
BATCH_NORM: False
WEIGHT_DECAY: 0
USE_DROPOUT: True # slightly less overfitting (but max f1_validate maybe slightly worse (makes sense if less overfitting))
DROPOUT_SAMPLING: False
SAVE_WEIGHTS: True
TYPE: "single" # single|combined
RESET_LAST_LAYER: False
UPSAMPLE_TYPE: "bilinear" # bilinear|nearest
BEST_EPOCH_SELECTION: "f1" # f1|loss
METRIC_TYPES: ["loss", "f1_macro"]
FP16: True
USE_VISLOGGER: False # TODO: Takes up GPU RAM
SEG_INPUT: "fodfs" # Gradients|Peaks|fodfs
NR_SLICES: 1
PRINT_FREQ: 20
NORMALIZE_DATA: True
NORMALIZE_PER_CHANNEL: False
CALC_F1: True
TEST_TIME_DAUG: False
PAD_TO_SQUARE: True
INPUT_RESCALING: False # Resample data to different resolution (instead of doing in preprocessing))

# Data augmentation
DATA_AUGMENTATION: False
DAUG_SCALE: True
DAUG_NOISE: True
DAUG_NOISE_VARIANCE: [0, 0.05]
DAUG_ELASTIC_DEFORM: True
DAUG_ALPHA: [90.0, 120.0]
DAUG_SIGMA: [9.0, 11.0]
DAUG_RESAMPLE: False # does not improve validation dice (if using Gaussian_blur) -> deactivate
DAUG_RESAMPLE_LEGACY: False # does not improve validation dice (at least on AutoPTX) -> deactivate
DAUG_GAUSSIAN_BLUR: True
DAUG_BLUR_SIGMA: [0, 1]
DAUG_ROTATE: False
DAUG_ROTATE_ANGLE: [-0.2, 0.2] # rotation: 2*np.pi: 360 degree  (0.4 ~= 22 degree, 0.2 ~= 11 degree))
DAUG_MIRROR: False
DAUG_FLIP_PEAKS: False
SPATIAL_TRANSFORM: "SpatialTransform" # SpatialTransform|SpatialTransformPeaks
P_SAMP: 1.0
